<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>1.4. Python Package Index (PyPI)</title><link rel="stylesheet" type="text/css" href="../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><meta name="keywords" content="php,pear,pecl,phar, python, , " /><link rel="home" href="../index.html" title="Netkiller Python 手札" /><link rel="up" href="introduction.html" title="第 1 章 Python 入门" /><link rel="prev" href="setup.html" title="1.3. Python 包管理" /><link rel="next" href="stdio.html" title="第 2 章 Input/Output" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> |
		<a xmlns="" href="//netkiller.github.io/">简体中文</a> |
	    <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> |
	    <a xmlns="" href="/journal/index.html">杂文</a> |
	    <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> |
   	    <a xmlns="" href="https://edu.51cto.com/lecturer/1703915.html">视频教程</a> |
	    <a xmlns="" href="https://space.bilibili.com/486347986/">bilibili</a> |
	    <a xmlns="" href="https://github.com/netkiller">Github</a> |
	    <a xmlns="" href="http://my.oschina.net/neochen/">OSChina 博客</a> |
	    <a xmlns="" href="https://cloud.tencent.com/developer/column/2078">云社区</a> |
	    <a xmlns="" href="https://yq.aliyun.com/u/netkiller/">云栖社区</a> |
	    <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> |
	    <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> |
	    <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> |
	    <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.4. Python Package Index (PyPI)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="setup.html">上一页</a> </td><th width="60%" align="center">第 1 章 Python 入门</th><td width="20%" align="right"> <a accesskey="n" href="stdio.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> ｜ <a href="https://www.zhihu.com/club/1241768772601950208">多维度架构</a></td><td> | </td><td>微信号 netkiller-ebook  </td><td> | </td><td>51CTO：<a href="https://edu.51cto.com/lecturer/1703915.html">视频教程</a></td></tr></table><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idm280716199248"></a>1.4. Python Package Index (PyPI)</h2></div></div></div>
	
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716198288"></a>1.4.1. 什么是 PyPI</h3></div></div></div>
		
		<p>The Python Package Index (PyPI) is a repository of software for the Python programming language.</p>
		<p>PyPI helps you find and install software developed and shared by the Python community.</p>
		<p>Package authors use PyPI to distribute their software.</p>
		<p>PyPI 是一个 Python 语言软件仓库，开发包的作者通过Python社区共享他们的作品。软件开发者可以在平台上搜索、安装和使用这些共享资源。</p>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716195488"></a>1.4.2. 准备目录</h3></div></div></div>
		
		<p>发布 Python 包到 PyPI（Python Package Index） 的步骤</p>
		<p>下面开始介绍如何将自己的 Python 包发布到Python Package Index。</p>
		<p>准备一个 Python 项目，目录结构如下</p>
		<pre class="screen">
		
neo@MacBook-Pro-Neo ~/workspace % mkdir netkiller-project
neo@MacBook-Pro-Neo ~/workspace % cd netkiller-project
		
		</pre>		
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716192688"></a>1.4.3. 创建LICENSE文件</h3></div></div></div>
		
		<p>上传到 Python Package Index 的包必须包含该文件，外国法律是很严的，License 文件是告诉用户该软件包的授权条款。你可以在下面网站找到 License 复制粘贴到 LICENSE文件中。</p>
		<p><a class="ulink" href="//choosealicense.com" target="_top">Choose an open source license</a> 我使用的是MIT License</p>
		<pre class="screen">
		
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % curl -s https://mit-license.org | sed 's/&lt;[^&gt;]*&gt;//g ; /^$/d' &gt; LICENSE		
		
		</pre>		
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716189568"></a>1.4.4. 项目描述文件</h3></div></div></div>
		
		<pre class="screen">
		
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % vim README.md
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % cat README.md 
= Netkiller-Project
演示如何上传包到PyPI		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716188224"></a>1.4.5. 库代码</h3></div></div></div>
		
		<pre class="screen">
		
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % mkdir netkiller
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % vim netkiller/__init__.py
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % cat netkiller/__init__.py 
name = "netkiller"
__version__ = "0.0.1"
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716186704"></a>1.4.6. setuptools 构建脚本</h3></div></div></div>
		
		<p>setup.py 文件是 setuptools 打包工具的构建脚本，主要用来描述项目名称，版本，作者邮箱，项目描述信息，网址，运行环境，依赖哪些库，支持哪些操作系统，等等。</p>
		<pre class="screen">
		
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % vim setup.py
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % cat setup.py 
import setuptools

with open("README.md", "r") as fh:
  long_description = fh.read()

setuptools.setup(
  name="netkiller-project",
  version="0.0.1",
  author="Neo Chen",
  author_email="netkiller@msn.com",
  description="Netkiller Python Package",
  long_description=long_description,
  long_description_content_type="text/markdown",
  url="https://github.com/netkiller/netkiller.netkiller.io",
  packages=setuptools.find_packages(),
  classifiers=[
  "Programming Language :: Python :: 3",
  "License :: OSI Approved :: MIT License",
  "Operating System :: OS Independent",
  ],
)		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716184864"></a>1.4.7. 构建包</h3></div></div></div>
		
		<p>使用命令 python3 setup.py sdist bdist_wheel 打包</p>
		<pre class="screen">
		
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % python3 setup.py sdist bdist_wheel
running sdist
running egg_info
creating netkiller_project.egg-info
writing netkiller_project.egg-info/PKG-INFO
writing dependency_links to netkiller_project.egg-info/dependency_links.txt
writing top-level names to netkiller_project.egg-info/top_level.txt
writing manifest file 'netkiller_project.egg-info/SOURCES.txt'
reading manifest file 'netkiller_project.egg-info/SOURCES.txt'
writing manifest file 'netkiller_project.egg-info/SOURCES.txt'
running check
creating netkiller-project-0.0.1
creating netkiller-project-0.0.1/netkiller_project.egg-info
copying files to netkiller-project-0.0.1...
copying README.md -&gt; netkiller-project-0.0.1
copying setup.py -&gt; netkiller-project-0.0.1
copying netkiller_project.egg-info/PKG-INFO -&gt; netkiller-project-0.0.1/netkiller_project.egg-info
copying netkiller_project.egg-info/SOURCES.txt -&gt; netkiller-project-0.0.1/netkiller_project.egg-info
copying netkiller_project.egg-info/dependency_links.txt -&gt; netkiller-project-0.0.1/netkiller_project.egg-info
copying netkiller_project.egg-info/top_level.txt -&gt; netkiller-project-0.0.1/netkiller_project.egg-info
Writing netkiller-project-0.0.1/setup.cfg
creating dist
Creating tar archive
removing 'netkiller-project-0.0.1' (and everything under it)
running bdist_wheel
running build
installing to build/bdist.macosx-11-x86_64/wheel
running install
running install_egg_info
Copying netkiller_project.egg-info to build/bdist.macosx-11-x86_64/wheel/netkiller_project-0.0.1-py3.9.egg-info
running install_scripts
adding license file "LICENSE" (matched pattern "LICEN[CS]E*")
creating build/bdist.macosx-11-x86_64/wheel/netkiller_project-0.0.1.dist-info/WHEEL
creating 'dist/netkiller_project-0.0.1-py3-none-any.whl' and adding 'build/bdist.macosx-11-x86_64/wheel' to it
adding 'netkiller_project-0.0.1.dist-info/LICENSE'
adding 'netkiller_project-0.0.1.dist-info/METADATA'
adding 'netkiller_project-0.0.1.dist-info/WHEEL'
adding 'netkiller_project-0.0.1.dist-info/top_level.txt'
adding 'netkiller_project-0.0.1.dist-info/RECORD'
removing build/bdist.macosx-11-x86_64/wheel		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716182400"></a>1.4.8. 查看包</h3></div></div></div>
		
		<pre class="screen">
		
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % ls dist 
netkiller-project-0.0.1.tar.gz           netkiller_project-0.0.1-py3-none-any.whl
		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716181008"></a>1.4.9. 上传包</h3></div></div></div>
		
		<pre class="screen">
		
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % twine upload dist/*
Uploading distributions to https://upload.pypi.org/legacy/
Enter your username: netkiller
Enter your password: 
Uploading netkiller_project-0.0.1-py3-none-any.whl
100%|██████████████████████████████████████████████████████████| 5.81k/5.81k [00:02&lt;00:00, 2.28kB/s]
Uploading netkiller-project-0.0.1.tar.gz
100%|██████████████████████████████████████████████████████████| 4.24k/4.24k [00:01&lt;00:00, 3.54kB/s]

View at:
https://pypi.org/project/netkiller-project/0.0.1/		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716178912"></a>1.4.10. 安装包</h3></div></div></div>
		
		<pre class="screen">
		
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % pip3 install netkiller-project
Collecting netkiller-project
  Downloading netkiller_project-0.0.1-py3-none-any.whl (2.8 kB)
Installing collected packages: netkiller-project
Successfully installed netkiller-project-0.0.1		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716177472"></a>1.4.11. 使用包</h3></div></div></div>
		
		<pre class="screen">
		
neo@MacBook-Pro-Neo ~/tmp % cat test.py 
import netkiller
print(netkiller.name)		
		
		</pre>
	</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716176240"></a>1.4.12. 卸载包</h3></div></div></div>
		
		<pre class="screen">
		
neo@MacBook-Pro-Neo ~/workspace/netkiller-project % pip3 uninstall netkiller-project
Found existing installation: netkiller-project 0.0.3
Uninstalling netkiller-project-0.0.3:
  Would remove:
    /usr/local/lib/python3.9/site-packages/netkiller/*
    /usr/local/lib/python3.9/site-packages/netkiller_project-0.0.3.dist-info/*
Proceed (y/n)? y
  Successfully uninstalled netkiller-project-0.0.3	
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm280716174496"></a>1.4.13. Built distribution</h3></div></div></div>
		
		<pre class="screen">
		
Format	Description	Notes
gztar	gzipped tar file (.tar.gz)	Unix 默认
bztar	bzipped tar file (.tar.bz2)	
xztar	xzipped tar file (.tar.xz)	
ztar	compressed tar file (.tar.Z)	
tar	tar file (.tar)	
zip	zip file (.zip)	Windows 默认
rpm	RPM	
pkgtool	Solaris pkgtool	
sdux	HP-UX swinstall	
wininst	self-extracting ZIP file for Windows	
msi	Microsoft Installer.


$ python setup.py bdist --formats=rpm

setuptools 提供了如下简化命令：

Command	Formats	Notes
bdist_dumb	tar, gztar, bztar, xztar, ztar, zip	Windows 默认 zip, Unix 默认 gztar
bdist_rpm	rpm, srpm	
bdist_wininst	wininst	
bdist_msi	msi	

打 rpm 包可以使用：

$ python setup.py bdist_rpm

		
		</pre>
	</div>
</div>

        网站：<a xmlns="" href="//www.netkiller.cn/">http://www.netkiller.cn/</a> |
	    知乎：<a xmlns="" href="https://www.zhihu.com/people/netkiller">netkiller</a> |
	    51CTO：<a xmlns="" href="https://edu.51cto.com/lecturer/1703915.html">视频教程</a> |
	    Bilibili：<a xmlns="" href="https://space.bilibili.com/486347986/">netkiller</a> |
	    Github：<a xmlns="" href="https://github.com/netkiller">netkiller</a><div xmlns="" id="disqus_thread"></div><script xmlns="">

var disqus_config = function () {
this.page.url = "http://www.netkiller.cn";  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = 'netkiller'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//netkiller.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script><noscript xmlns="">Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><br xmlns="" /><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="setup.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="introduction.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="stdio.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">1.3. Python 包管理 </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 第 2 章 Input/Output</td></tr></table></div><script xmlns="">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-11694057-1', 'auto');
  ga('send', 'pageview');

</script><script xmlns="" async="async">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script xmlns="" async="async">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script></body></html>